import{a as F,b as se}from"./chunk-E5TZCP6Z.js";import{a as D}from"./chunk-4E55FQHO.js";import{b as B}from"./chunk-ZSYTLZVE.js";import{a as y,b as T,c as _,d as A,e as U,f as I,g as w,h as P,j as J,k as N,l as O,m as W}from"./chunk-YZKZ4GTS.js";import{Ab as oe,Bb as M,Da as v,Ea as Q,Fa as l,Ha as i,Ia as n,Ja as d,Ka as $,La as z,Ma as j,Na as m,Oa as h,Pa as o,Qa as C,Ra as S,Sa as re,T as f,Ua as p,V as c,a as ne,b as ie,ba as V,c as b,ca as L,ja as x,pb as R,qb as k,sa as s,zb as ae}from"./chunk-YELC52QC.js";function ye(r,g){if(r&1&&($(0),i(1,"div",5)(2,"label",23),o(3,"Fecha de inicio de uso del equipo"),n(),i(4,"p",24),o(5),n()(),i(6,"div",5)(7,"label",25),o(8,"Fecha de termino de uso del equipo"),n(),i(9,"p",26),o(10),n()(),z()),r&2){let t=h();s(5),S(" ",t.getDate(t.request==null?null:t.request.startDate)," "),s(5),S(" ",t.getDate(t.request==null?null:t.request.endDate)," ")}}function Ee(r,g){if(r&1&&(i(0,"div",5)(1,"label",27),o(2,"Cantidad solicitada del reactivo"),n(),i(3,"p",28),o(4),n()()),r&2){let t=h();s(4),S(" ",t.request==null?null:t.request.quantity," ")}}var le=(()=>{class r{requestSelectedEvent=new x;request;setRequestSelected(t){t&&this.requestSelectedEvent.emit(t)}getDate(t){return t?new Date(t).toDateString():"Sin informaci\xF3n"}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=c({type:r,selectors:[["app-request-card"]],inputs:{request:"request"},outputs:{requestSelectedEvent:"requestSelectedEvent"},standalone:!0,features:[p],decls:36,vars:7,consts:[[1,"card","mt-3"],[1,"card-header"],[1,"my-2"],[1,"fw-bold"],[1,"card-body"],[1,"mb-3"],["for","title",1,"fw-bold"],["id","title"],["for","about",1,"fw-bold"],["id","about"],["for","date",1,"fw-bold"],["id","date"],[4,"ngIf"],["class","mb-3",4,"ngIf"],["for","status",1,"fw-bold"],["id","status"],[1,"card-footer","d-flex","justify-content-between"],["data-bs-toggle","modal","data-bs-target","#modalDelete","type","button","title","Cancelar solicitud",1,"btn",3,"click"],["src","assets/icons/danger.svg","alt","Eliminar",1,"icon"],["data-bs-toggle","modal","data-bs-target","#modalWarning","type","button","title","Reportar imprevisto con la solicitud",1,"btn",3,"click"],["src","assets/icons/warning.svg","alt","Advertencias",1,"icon"],["data-bs-toggle","modal","data-bs-target","#modalShow","type","button","title","Mostrar informaci\xF3n del Item solicitado",1,"btn",3,"click"],["src","assets/icons/show.svg","alt","Mostrar",1,"icon"],["for","dateStart",1,"fw-bold"],["id","dateStart"],["for","dateEnd",1,"fw-bold"],["id","dateEnd"],["for","quantity",1,"fw-bold"],["id","quantity"]],template:function(a,e){a&1&&(i(0,"div",0)(1,"div",1)(2,"p",2)(3,"span",3),o(4,"ID de la solicitud: "),n(),o(5),n()(),i(6,"div",4)(7,"div",5)(8,"label",6),o(9,"Nombre del Item"),n(),i(10,"p",7),o(11),n()(),i(12,"div",5)(13,"label",8),o(14,"Informaci\xF3n de la solicitud"),n(),i(15,"p",9),o(16),n()(),i(17,"div",5)(18,"label",10),o(19,"Fecha de la solicitud"),n(),i(20,"p",11),o(21),n()(),v(22,ye,11,2,"ng-container",12)(23,Ee,5,1,"div",13),i(24,"div",5)(25,"label",14),o(26,"Estatus de la solicitud"),n(),i(27,"p",15),o(28),n()()(),i(29,"div",16)(30,"button",17),m("click",function(){return e.setRequestSelected(e.request)}),d(31,"img",18),n(),i(32,"button",19),m("click",function(){return e.setRequestSelected(e.request)}),d(33,"img",20),n(),i(34,"button",21),m("click",function(){return e.setRequestSelected(e.request)}),d(35,"img",22),n()()()),a&2&&(s(5),C(e.request==null?null:e.request._id),s(6),S(" ",e.request==null||e.request.item==null?null:e.request.item.name," "),s(5),S(" ",e.request==null?null:e.request.about," "),s(5),S(" ",e.getDate(e.request==null?null:e.request.date)," "),s(),l("ngIf",(e.request==null||e.request.item==null?null:e.request.item.type)==1),s(),l("ngIf",(e.request==null||e.request.item==null?null:e.request.item.type)==2&&(e.request==null?null:e.request.quantity)),s(5),S(" ",e.request!=null&&e.request.status?"Aprovado":"Pendiente"," "))},dependencies:[k],styles:[".icon[_ngcontent-%COMP%]{width:2.5rem}.danger[_ngcontent-%COMP%]:hover{background-color:var(--background-color-4)!important}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3);border:dotted}"]})}return r})();function we(r,g){if(r&1&&(i(0,"div",8)(1,"label",30),o(2,"Cantidad solicitada"),n(),i(3,"p",31),o(4),n()()),r&2){let t=h();s(4),S(" ",t.request==null?null:t.request.quantity," ")}}function ke(r,g){if(r&1&&(i(0,"p",39),o(1),n()),r&2){let t=h(2);s(),C(t.status)}}function Me(r,g){if(r&1&&(i(0,"p",43),o(1),n()),r&2){let t=g.$implicit;s(),C(t._id)}}function Ie(r,g){if(r&1&&(i(0,"div",40)(1,"p",41),o(2,"ID de las solicitudes aprovadas con conflicto:"),n(),v(3,Me,2,1,"p",42),n()),r&2){let t=h(2);s(3),l("ngForOf",t.overlappingRequests)}}function xe(r,g){if(r&1){let t=j();$(0),i(1,"div",8)(2,"p",3),o(3,"Revisar disponibilidad en horario:"),n(),v(4,ke,2,1,"p",32)(5,Ie,4,1,"div",33),i(6,"button",34),m("click",function(){V(t);let e=h();return L(e.checkAvailability())}),o(7," Revisar "),n()(),i(8,"div",8)(9,"label",35),o(10,"Fecha de inicio de uso del equipo"),n(),i(11,"p",36),o(12),n()(),i(13,"div",8)(14,"label",37),o(15,"Fecha de termino de uso del equipo"),n(),i(16,"p",38),o(17),n()(),z()}if(r&2){let t=h();s(4),l("ngIf",t.status),s(),l("ngIf",t.overlappingRequests),s(7),S(" ",t.getDate(t.request==null?null:t.request.startDate)," "),s(5),S(" ",t.getDate(t.request==null?null:t.request.endDate)," ")}}var de=(()=>{class r{requestSelectedEvent=new x;request;overlappingRequests;status;_requestService=f(F);_waitingModalService=f(M);setRequestSelected(t){t&&this.requestSelectedEvent.emit(t)}setStatus(t,a){return b(this,null,function*(){a&&(yield this._requestService.updateRequest(ie(ne({},a),{status:t})))&&(a.status=t)})}getDate(t){return t?new Date(t).toDateString():"Sin informaci\xF3n"}checkAvailability(){return b(this,null,function*(){if(this._waitingModalService.setIsWaiting(!0),this.request){let{requests:t}=yield this._requestService.checkAvailability(this.request);!t||t.length==0?this.status="Equipo Disponible":t?(this.status="Equipo Ocupado",this.overlappingRequests=t):this.status="Error al revisar, favor de verificar"}this._waitingModalService.setIsWaiting(!1)})}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=c({type:r,selectors:[["app-request-card-admin"]],inputs:{request:"request"},outputs:{requestSelectedEvent:"requestSelectedEvent"},standalone:!0,features:[p],decls:45,vars:8,consts:[[1,"card","mt-3"],[1,"card-header"],[1,"my-2"],[1,"fw-bold"],[1,"card-body"],[1,"mb-3","text-center"],["for","title",1,"fw-bold","text-danger"],["id","title",1,"h1","text-danger"],[1,"mb-3"],["for","name",1,"fw-bold"],["id","name"],["for","about",1,"fw-bold"],["id","about"],["class","mb-3",4,"ngIf"],["for","date",1,"fw-bold"],["id","date"],[4,"ngIf"],["for","status",1,"fw-bold"],["id","status",1,"h2"],[1,"card-footer","d-flex","justify-content-between"],["type","button","title","Rechazar Solicitud",1,"btn","btn-custom",3,"click"],["src","assets/icons/reject.svg","alt","Rechazar",1,"icon"],["data-bs-toggle","modal","data-bs-target","#modalDelete","type","button","title","Eliminar solicitud",1,"btn","btn-custom",3,"click"],["src","assets/icons/danger.svg","alt","Eliminar",1,"icon"],["data-bs-toggle","modal","data-bs-target","#modalWarning","type","button","title","Reportar imprevisto con la solicitud",1,"btn","btn-custom",3,"click"],["src","assets/icons/warning.svg","alt","Advertencias",1,"icon"],["data-bs-toggle","modal","data-bs-target","#modalShow","type","button","title","Mostrar informaci\xF3n del Item solicitado",1,"btn","btn-custom",3,"click"],["src","assets/icons/show.svg","alt","Mostrar",1,"icon"],["type","button","title","Aceptar Solicitud",1,"btn","btn-custom",3,"click"],["src","assets/icons/ok.svg","alt","Aceptar",1,"icon"],["for","quantity",1,"fw-bold"],["id","quantity"],["class","text-danger h4",4,"ngIf"],["class","mt-4 mb-5",4,"ngIf"],[1,"btn","btn-outline-danger",3,"click"],["for","startDate",1,"fw-bold"],["id","startDate"],["for","endDate",1,"fw-bold"],["id","endDate"],[1,"text-danger","h4"],[1,"mt-4","mb-5"],[1,"h5"],["class","h6",4,"ngFor","ngForOf"],[1,"h6"]],template:function(a,e){a&1&&(i(0,"div",0)(1,"div",1)(2,"p",2)(3,"span",3),o(4,"ID de la solicitud: "),n(),o(5),n()(),i(6,"div",4)(7,"div",5)(8,"label",6),o(9,"Usuario solicitante"),n(),i(10,"p",7),o(11),n()(),i(12,"div",8)(13,"label",9),o(14,"Nombre del Item"),n(),i(15,"p",10),o(16),n()(),i(17,"div",8)(18,"label",11),o(19,"Informaci\xF3n de la solicitud"),n(),i(20,"p",12),o(21),n()(),v(22,we,5,1,"div",13),i(23,"div",8)(24,"label",14),o(25,"Fecha de la solicitud"),n(),i(26,"p",15),o(27),n()(),v(28,xe,18,4,"ng-container",16),i(29,"div",8)(30,"label",17),o(31,"Estatus de la solicitud"),n(),i(32,"p",18),o(33),n()()(),i(34,"div",19)(35,"button",20),m("click",function(){return e.setRequestSelected(e.request),e.setStatus(!1,e.request)}),d(36,"img",21),n(),i(37,"button",22),m("click",function(){return e.setRequestSelected(e.request)}),d(38,"img",23),n(),i(39,"button",24),m("click",function(){return e.setRequestSelected(e.request)}),d(40,"img",25),n(),i(41,"button",26),m("click",function(){return e.setRequestSelected(e.request)}),d(42,"img",27),n(),i(43,"button",28),m("click",function(){return e.setRequestSelected(e.request),e.setStatus(!0,e.request)}),d(44,"img",29),n()()()),a&2&&(s(5),C(e.request==null?null:e.request._id),s(6),S(" ",e.request==null?null:e.request.author," "),s(5),S(" ",e.request==null||e.request.item==null?null:e.request.item.name," "),s(5),S(" ",e.request==null?null:e.request.about," "),s(),l("ngIf",(e.request==null||e.request.item==null?null:e.request.item.type)==2),s(5),S(" ",e.getDate(e.request==null?null:e.request.date)," "),s(),l("ngIf",(e.request==null||e.request.item==null?null:e.request.item.type)==1),s(5),S(" ",e.request!=null&&e.request.status?"Aprovado":"Pendiente"," "))},dependencies:[k,R],styles:[".icon[_ngcontent-%COMP%]{width:2.5rem}.danger[_ngcontent-%COMP%]:hover{background-color:var(--background-color-4)!important}.btn.btn-custom[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3);border:dotted}"]})}return r})();function Re(r,g){if(r&1){let t=j();i(0,"app-request-card",4),m("requestSelectedEvent",function(e){V(t);let u=h(2);return L(u.setRequestSelected(e))}),n()}if(r&2){let t=h().$implicit;l("request",t)}}function Fe(r,g){if(r&1){let t=j();i(0,"app-request-card-admin",4),m("requestSelectedEvent",function(e){V(t);let u=h(2);return L(u.setRequestSelected(e))}),n()}if(r&2){let t=h().$implicit;l("request",t)}}function De(r,g){if(r&1&&(i(0,"div",2),v(1,Re,1,1,"app-request-card",3)(2,Fe,1,1,"app-request-card-admin",3),n()),r&2){let t=h();s(),l("ngIf",!t.isAdmin()),s(),l("ngIf",t.isAdmin())}}var me=(()=>{class r{requestSelectedEvent=new x;requests;_sessionService=f(oe);isAdmin(){return this._sessionService.isAdmin()}setRequestSelected(t){this.requestSelectedEvent.emit(t)}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=c({type:r,selectors:[["app-request-cards"]],inputs:{requests:"requests"},outputs:{requestSelectedEvent:"requestSelectedEvent"},standalone:!0,features:[p],decls:2,vars:1,consts:[[1,"row","mt-4"],["class","",4,"ngFor","ngForOf"],[1,""],[3,"request","requestSelectedEvent",4,"ngIf"],[3,"requestSelectedEvent","request"]],template:function(a,e){a&1&&(i(0,"div",0),v(1,De,3,2,"div",1),n()),a&2&&(s(),l("ngForOf",e.requests))},dependencies:[le,de,R,k]})}return r})();var ue=(()=>{class r{requests;request;_requestService=f(F);_alertService=f(D);_waitingModelService=f(M);deleteRequest(){return b(this,null,function*(){this._waitingModelService.setIsWaiting(!0);let t={keep:!1,text:"Error al eliminar Solicitud, favor de revisar",type:y.Danger};this.requests&&this.request?._id&&(yield this._requestService.deleteRequest(this.requests,this.request._id))&&(t={keep:!1,text:"Solicitud eliminada con \xE9xito",type:y.Success}),this._alertService.addAlert(t),this._waitingModelService.setIsWaiting(!1)})}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=c({type:r,selectors:[["app-request-delete"]],inputs:{requests:"requests",request:"request"},standalone:!0,features:[p],decls:10,vars:0,consts:[["id","modalDelete","tabindex","-1","aria-labelledby","modalDeleteLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalDeleteLabel",1,"modal-title","fs-5","h1","ms-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-footer","justify-content-center"],["data-bs-dismiss","modal","type","button","title","Eliminar",1,"btn","danger",3,"click"],["src","assets/icons/danger.svg","alt","Eliminar",1,"icon"]],template:function(a,e){a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),o(5,"\xBFEliminar Solicitud?"),n(),d(6,"button",5),n(),i(7,"div",6)(8,"button",7),m("click",function(){return e.deleteRequest()}),d(9,"img",8),n()()()()())},styles:[".icon[_ngcontent-%COMP%]{width:2.5rem}.danger[_ngcontent-%COMP%]:hover{background-color:var(--background-color-4)!important}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3);border:dotted}"]})}return r})();var ce=(()=>{class r{message;accordionParent="";static \u0275fac=function(a){return new(a||r)};static \u0275cmp=c({type:r,selectors:[["app-request-message"]],inputs:{message:"message",accordionParent:"accordionParent"},standalone:!0,features:[p],decls:12,vars:7,consts:[[1,"accordion-item"],[1,"accordion-header"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"accordion-button","collapsed","h2"],[1,"accordion-collapse","collapse",3,"id"],[1,"accordion-body"],[1,"h4"]],template:function(a,e){a&1&&(i(0,"div",0)(1,"h2",1)(2,"button",2),o(3),n()(),i(4,"div",3)(5,"div",4)(6,"p",5),o(7),n(),i(8,"p"),o(9,"ID: "),i(10,"small"),o(11),n()()()()()),a&2&&(s(2),Q("data-bs-target","#"+(e.message==null?null:e.message._id))("aria-controls",e.message==null?null:e.message._id),s(),S(" ",e.message==null?null:e.message.author," "),s(),l("id",e.message==null?null:e.message._id),Q("data-bs-parent","#"+e.accordionParent),s(3),C(e.message==null?null:e.message.message),s(4),S(" ",e.message==null?null:e.message._id," "))}})}return r})();function Te(r,g){if(r&1&&d(0,"app-request-message",2),r&2){let t=g.$implicit;l("message",t)}}var pe=(()=>{class r{request;static \u0275fac=function(a){return new(a||r)};static \u0275cmp=c({type:r,selectors:[["app-request-messages"]],inputs:{request:"request"},standalone:!0,features:[p],decls:2,vars:1,consts:[["id","accordion-parent",1,"accordion","accordion-flush"],["accordionParent","accordion-parent",3,"message",4,"ngFor","ngForOf"],["accordionParent","accordion-parent",3,"message"]],template:function(a,e){a&1&&(i(0,"div",0),v(1,Te,1,1,"app-request-message",1),n()),a&2&&(s(),l("ngForOf",e.request==null?null:e.request.messages))},dependencies:[ce,R]})}return r})();var fe=(()=>{class r{request;static \u0275fac=function(a){return new(a||r)};static \u0275cmp=c({type:r,selectors:[["app-request-warning-messages"]],inputs:{request:"request"},standalone:!0,features:[p],decls:9,vars:1,consts:[["id","modalWarningMessages","tabindex","-1","aria-labelledby","modalWarningMessagesLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalWarningMessagesLabel",1,"modal-title","fs-5","h1","ms-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"request"]],template:function(a,e){a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),o(5,"Historial de reportes de la solicitud"),n(),d(6,"button",5),n(),i(7,"div",6),d(8,"app-request-messages",7),n()()()()),a&2&&(s(8),l("request",e.request))},dependencies:[pe]})}return r})();var ge=(()=>{class r{request;formMessageNew=new I({});_requestService=f(F);_alertService=f(D);ngOnInit(){this.formMessageNew=new I({message:new w("",[_.required,_.minLength(1),_.maxLength(255)])})}sendMessage(){return b(this,null,function*(){let t={keep:!1,text:"Error al enviar mensaje, favor de revisar",type:y.Danger};if(this.request&&this.formMessageNew.valid){let{message:a}=this.formMessageNew.value;(yield this._requestService.addMessage(this.request,a))&&(this.formMessageNew.reset(),t={keep:!1,text:"Mensaje enviado con \xE9xito",type:y.Success})}this._alertService.addAlert(t)})}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=c({type:r,selectors:[["app-request-warning"]],inputs:{request:"request"},standalone:!0,features:[p],decls:18,vars:4,consts:[["id","modalWarning","tabindex","-1","aria-labelledby","modalWarningLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalWarningLabel",1,"modal-title","fs-5","h1","ms-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body",3,"formGroup"],[1,"mb-3"],["for","message",1,"form-label"],["formControlName","message","id","message","rows","3",1,"form-control",3,"maxLength","minLength"],[1,"modal-footer","justify-content-between"],["data-bs-toggle","modal","data-bs-target","#modalWarningMessages","type","button","title","Mostrar mensajes enviados",1,"btn"],["src","assets/icons/history.svg","alt","Mostrar",1,"icon"],["type","button","title","Enviar mensaje al/los administrador(es)",1,"btn",3,"click"],["src","assets/icons/send.svg","alt","Enviar",1,"icon"],[3,"request"]],template:function(a,e){a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),o(5,"Reportar imprevisto con la solicitud"),n(),d(6,"button",5),n(),i(7,"form",6)(8,"div",7)(9,"label",8),o(10,"Mensaje de reporte: "),n(),d(11,"textarea",9),n()(),i(12,"div",10)(13,"button",11),d(14,"img",12),n(),i(15,"button",13),m("click",function(){return e.sendMessage()}),d(16,"img",14),n()()()()(),d(17,"app-request-warning-messages",15)),a&2&&(s(7),l("formGroup",e.formMessageNew),s(4),l("maxLength",255)("minLength",1),s(6),l("request",e.request))},dependencies:[fe,W,P,T,A,U,N,O],styles:[".icon[_ngcontent-%COMP%]{width:2.5rem}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3);border:dotted}"]})}return r})();var ve=(()=>{class r{requests;filteredRequests;requestSelected;filterValue="pending";searchTerm="";_requestService=f(F);_waitingModalService=f(M);ngOnInit(){return b(this,null,function*(){this._waitingModalService.setIsWaiting(!0),this.requests=yield this._requestService.getRequests(),this.applySearchTerm(),this._waitingModalService.setIsWaiting(!1)})}setRequestSelected(t){this.requestSelected=t}filterRequests(t){return b(this,null,function*(){this._waitingModalService.setIsWaiting(!0),this.filterValue=t.target.value,this.requests=yield this._requestService.getRequests(),this.applySearchTerm(),this._waitingModalService.setIsWaiting(!1)})}searchRequests(t){this.searchTerm=t.target.value.toLowerCase(),this.applySearchTerm()}applySearchTerm(){this.filterValue=="all"?this.filteredRequests=this.requests:this.filterValue=="pending"?this.filteredRequests=this.requests?.filter(t=>t.status==!1):this.filterValue=="approved"&&(this.filteredRequests=this.requests?.filter(t=>t.status==!0)),this.filteredRequests=this.filteredRequests?.filter(t=>t._id?.toLowerCase().includes(this.searchTerm)||t.author?.toLowerCase().includes(this.searchTerm))}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=c({type:r,selectors:[["app-request-page"]],standalone:!0,features:[p],decls:26,vars:5,consts:[[1,"container"],[1,"col-12"],[1,"custom-header","p-5","rounded","mt-3"],[1,"title","fw-bold","text-center"],[1,"col-12","mt-3"],[1,"d-flex","justify-content-center"],["role","group","aria-label","Filtro de solicitudes",1,"btn-group"],["type","radio","name","filterOptions","id","filterAll","value","all",1,"btn-check",3,"change"],["for","filterAll",1,"btn","btn-outline-dark"],["type","radio","name","filterOptions","id","filterPending","value","pending","checked","",1,"btn-check",3,"change"],["for","filterPending",1,"btn","btn-outline-dark"],["type","radio","name","filterOptions","id","filterApproved","value","approved",1,"btn-check",3,"change"],["for","filterApproved",1,"btn","btn-outline-dark"],[1,"row","justify-content-center"],[1,"col-12","col-lg-8","mt-3"],["type","text","placeholder","Buscar por id o nombre de usuario",1,"form-control","text-center",3,"input"],[1,"row"],[3,"requestSelectedEvent","requests"],[3,"item"],[3,"requests","request"],[3,"request"]],template:function(a,e){a&1&&(i(0,"main",0)(1,"div",1)(2,"div",2)(3,"p",3),o(4,"Solicitudes"),n()()(),i(5,"div",4)(6,"div",5)(7,"div",6)(8,"input",7),m("change",function(q){return e.filterRequests(q)}),n(),i(9,"label",8),o(10,"Todas"),n(),i(11,"input",9),m("change",function(q){return e.filterRequests(q)}),n(),i(12,"label",10),o(13,"Pendientes"),n(),i(14,"input",11),m("change",function(q){return e.filterRequests(q)}),n(),i(15,"label",12),o(16,"Aprobadas"),n()()(),i(17,"div",13)(18,"div",14)(19,"input",15),m("input",function(q){return e.searchRequests(q)}),n()()()(),i(20,"div",1)(21,"div",16)(22,"app-request-cards",17),m("requestSelectedEvent",function(q){return e.setRequestSelected(q)}),n()()()(),d(23,"app-item-show",18)(24,"app-request-delete",19)(25,"app-request-warning",20)),a&2&&(s(22),l("requests",e.filteredRequests),s(),l("item",e.requestSelected==null?null:e.requestSelected.item),s(),l("requests",e.filteredRequests)("request",e.requestSelected),s(),l("request",e.requestSelected))},dependencies:[me,se,ue,ge],styles:["p[_ngcontent-%COMP%]{text-align:justify}.title[_ngcontent-%COMP%]{font-size:2rem}.custom-header[_ngcontent-%COMP%]{background-color:#fff6}"]})}return r})();function Ae(r,g){r&1&&(i(0,"p",9),o(1," Visitante "),n())}function Ue(r,g){r&1&&(i(0,"p",9),o(1," Administrador "),n())}function Pe(r,g){r&1&&(i(0,"p",9),o(1," Usuario "),n())}var _e=(()=>{class r{userSelectedEvent=new x;user;getAdminType(){return ae.typeAdmin}setUserSelected(t){t&&this.userSelectedEvent.emit(t)}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=c({type:r,selectors:[["app-user-card"]],inputs:{user:"user"},outputs:{userSelectedEvent:"userSelectedEvent"},standalone:!0,features:[p],decls:12,vars:4,consts:[[1,"card","border-dark","mt-3"],[1,"card-header"],["class","h4 text-center",4,"ngIf"],[1,"card-body"],[1,"h2","text-center"],[1,"card-footer"],[1,"d-flex","justify-content-center",3,"click"],["data-bs-toggle","modal","data-bs-target","#modalEdit","type","button","title","Modificar",1,"btn"],["src","assets/icons/edit.svg","alt","Editar",1,"icon"],[1,"h4","text-center"]],template:function(a,e){a&1&&(i(0,"div",0)(1,"div",1),v(2,Ae,2,0,"p",2)(3,Ue,2,0,"p",2)(4,Pe,2,0,"p",2),n(),i(5,"div",3)(6,"p",4),o(7),n()(),i(8,"div",5)(9,"div",6),m("click",function(){return e.setUserSelected(e.user)}),i(10,"button",7),d(11,"img",8),n()()()()),a&2&&(s(2),l("ngIf",(e.user==null?null:e.user.type)==0),s(),l("ngIf",(e.user==null?null:e.user.type)==e.getAdminType()),s(),l("ngIf",(e.user==null?null:e.user.type)!=e.getAdminType()&&(e.user==null?null:e.user.type)!=0),s(3),C(e.user==null?null:e.user.username))},dependencies:[k],styles:[".icon[_ngcontent-%COMP%]{width:1.25rem}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3)}"]})}return r})();function Ne(r,g){if(r&1){let t=j();i(0,"div",2)(1,"app-user-card",3),m("userSelectedEvent",function(e){V(t);let u=h();return L(u.setUserSelected(e))}),n()()}if(r&2){let t=g.$implicit;s(),l("user",t)}}var be=(()=>{class r{userSelectedEvent=new x;users;setUserSelected(t){this.userSelectedEvent.emit(t)}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=c({type:r,selectors:[["app-user-cards"]],inputs:{users:"users"},outputs:{userSelectedEvent:"userSelectedEvent"},standalone:!0,features:[p],decls:2,vars:1,consts:[[1,"row"],["class","col-6 col-md-4 col-lg-3",4,"ngFor","ngForOf"],[1,"col-6","col-md-4","col-lg-3"],[3,"userSelectedEvent","user"]],template:function(a,e){a&1&&(i(0,"div",0),v(1,Ne,2,1,"div",1),n()),a&2&&(s(),l("ngForOf",e.users))},dependencies:[R,_e]})}return r})();function Oe(r,g){r&1&&(i(0,"div",7)(1,"label",21),o(2,"Tipo de usuario:"),n(),i(3,"div",22),d(4,"input",23),i(5,"label",24),o(6,"Administrador"),n(),d(7,"input",25),i(8,"label",26),o(9,"Usuario"),n(),d(10,"input",27),i(11,"label",28),o(12,"Visitante"),n()()())}function We(r,g){r&1&&($(0),i(1,"div",7)(2,"label",29),o(3,"Nueva contrase\xF1a"),n(),d(4,"input",30),n(),i(5,"div",7)(6,"label",31),o(7,"Confirmar contrase\xF1a"),n(),d(8,"input",32),n(),z())}var Se=(()=>{class r{users;user;formUser=new I({});_alertService=f(D);_authService=f(B);_waitingModalService=f(M);isPasswordChangeChecked=!1;isTypeChangeChecked=!1;ngOnInit(){return b(this,null,function*(){this.formUser=new I({type:new w("",[_.min(0)]),password:new w("",[_.minLength(4),_.maxLength(20)]),passwordConfirm:new w("",[_.minLength(4),_.maxLength(20)])})})}sendUser(){return b(this,null,function*(){this._waitingModalService.setIsWaiting(!0);let t={keep:!1,text:"Error al modificar usuario, favor de revisar",type:y.Danger};if(this.formUser.valid&&this.users&&this.user){let a=!0,{type:e,password:u,passwordConfirm:q}=this.formUser.value;e!=null&&(this.user.type=e),u&&q&&(u===q?this.user.password=u:a=!1),e>=0&&a&&(yield this._authService.updateUser(this.users,this.user))&&(this.formUser.reset(),t={keep:!1,text:"Usuario actualizado con \xE9xito",type:y.Success})}this._alertService.addAlert(t),this._waitingModalService.setIsWaiting(!1)})}deleteUser(){return b(this,null,function*(){this._waitingModalService.setIsWaiting(!0);let t={keep:!1,text:"Error al eliminar Usuario, favor de revisar",type:y.Danger};this.users&&this.user?._id&&(yield this._authService.deleteUser(this.users,this.user._id))&&(t={keep:!1,text:"Usuario eliminado con \xE9xito",type:y.Success}),this._alertService.addAlert(t),this._waitingModalService.setIsWaiting(!1)})}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=c({type:r,selectors:[["app-user-edit"]],inputs:{users:"users",user:"user"},standalone:!0,features:[p],decls:26,vars:4,consts:[["id","modalEdit","tabindex","-1","aria-labelledby","modalEditLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalEditLabel",1,"modal-title","fs-5","h1","ms-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body",3,"submit","formGroup"],[1,"mb-3"],[1,"h2"],[1,"form-check","form-switch","mb-3"],["type","checkbox","role","switch","id","changeAccess",1,"form-check-input",3,"change"],["for","changeAccess",1,"form-check-label"],["class","mb-3",4,"ngIf"],["type","checkbox","role","switch","id","changePassword",1,"form-check-input",3,"change"],["for","changePassword",1,"form-check-label"],[4,"ngIf"],[1,"modal-footer","justify-content-between"],["data-bs-dismiss","modal","type","button","title","Eliminar",1,"btn","danger",3,"click"],["src","assets/icons/danger.svg","alt","Eliminar",1,"icon"],["data-bs-dismiss","modal","type","submit","title","Editar",1,"btn",3,"click"],["src","assets/icons/ok.svg","alt","Aceptar",1,"icon"],["for","name"],["role","group","aria-label","Filtro de solicitudes",1,"btn-group"],["type","radio","formControlName","type","name","type","id","admin","value","1",1,"btn-check"],["for","admin",1,"btn","btn-outline-dark"],["type","radio","formControlName","type","name","type","id","user","value","2",1,"btn-check"],["for","user",1,"btn","btn-outline-dark"],["type","radio","formControlName","type","name","type","id","guest","value","0",1,"btn-check"],["for","guest",1,"btn","btn-outline-dark"],["for","password"],["formControlName","password","type","password","id","password","placeholder","Nueva contrase\xF1a",1,"form-control"],["for","passwordConfirm"],["formControlName","passwordConfirm","type","password","id","passwordConfirm","placeholder","Confirmar contrase\xF1a",1,"form-control"]],template:function(a,e){a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),o(5,"Editar usuario:"),n(),d(6,"button",5),n(),i(7,"form",6),m("submit",function(){return e.sendUser()}),i(8,"div",7)(9,"p",8),o(10),n()(),i(11,"div",9)(12,"input",10),m("change",function(){return e.isTypeChangeChecked=!e.isTypeChangeChecked}),n(),i(13,"label",11),o(14,"\xBFCambiar acceso?"),n()(),v(15,Oe,13,0,"div",12),i(16,"div",9)(17,"input",13),m("change",function(){return e.isPasswordChangeChecked=!e.isPasswordChangeChecked}),n(),i(18,"label",14),o(19,"\xBFCambiar contrase\xF1a?"),n()(),v(20,We,9,0,"ng-container",15),n(),i(21,"div",16)(22,"button",17),m("click",function(){return e.deleteUser()}),d(23,"img",18),n(),i(24,"button",19),m("click",function(){return e.sendUser()}),d(25,"img",20),n()()()()()),a&2&&(s(7),l("formGroup",e.formUser),s(3),C(e.user==null?null:e.user.username),s(5),l("ngIf",e.isTypeChangeChecked),s(5),l("ngIf",e.isPasswordChangeChecked))},dependencies:[W,P,T,J,A,U,N,O,k],styles:[".img[_ngcontent-%COMP%]:hover, .selected[_ngcontent-%COMP%]{background-color:var(--background-color-3)}.img[_ngcontent-%COMP%]{width:4rem;cursor:pointer;border:none}.icon[_ngcontent-%COMP%]{width:2.5rem}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3);border:dotted}"]})}return r})();var he=(()=>{class r{users;_authService=f(B);_alertService=f(D);formUser=new I({});ngOnInit(){return b(this,null,function*(){this.formUser=new I({username:new w("",[_.required,_.min(0)]),type:new w("",[_.required,_.min(0)]),password:new w("",[_.required,_.minLength(4),_.maxLength(20)]),passwordConfirm:new w("",[_.required,_.minLength(4),_.maxLength(20)])})})}sendUser(){return b(this,null,function*(){let t={keep:!1,text:"Error al agregar usuario, favor de revisar",type:y.Danger};if(this.formUser.valid&&this.users){let{username:a,type:e,password:u,passwordConfirm:q}=this.formUser.value;if(u===q){let K={username:a,type:e,password:u};(yield this._authService.signIn(this.users,K))&&(this.formUser.reset(),t={keep:!1,text:"Usuario agregado con \xE9xito",type:y.Success})}}this._alertService.addAlert(t)})}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=c({type:r,selectors:[["app-user-add"]],inputs:{users:"users"},standalone:!0,features:[p],decls:36,vars:1,consts:[["id","modalAddArea","tabindex","-1","aria-labelledby","modalAddAreaLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","modalAddAreaLabel",1,"modal-title","fs-5","h1","ms-2"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body",3,"ngSubmit","formGroup"],[1,"mb-3"],["for","username"],["formControlName","username","type","text","id","username","placeholder","Nombre de usuario",1,"form-control"],["for","name"],["role","group","aria-label","Filtro de solicitudes",1,"btn-group"],["type","radio","formControlName","type","name","type","id","admin","value","1",1,"btn-check"],["for","admin",1,"btn","btn-outline-dark"],["type","radio","formControlName","type","name","type","id","user","value","2",1,"btn-check"],["for","user",1,"btn","btn-outline-dark"],["type","radio","formControlName","type","name","type","id","guest","value","0",1,"btn-check"],["for","guest",1,"btn","btn-outline-dark"],["for","password"],["formControlName","password","type","password","id","password","placeholder","Nueva contrase\xF1a",1,"form-control"],["for","passwordConfirm"],["formControlName","passwordConfirm","type","password","id","passwordConfirm","placeholder","Confirmar contrase\xF1a",1,"form-control"],[1,"modal-footer"],["data-bs-dismiss","modal","type","submit","title","Agregar",1,"btn",3,"click"],["src","assets/icons/ok.svg","alt","",1,"icon"]],template:function(a,e){a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"p",4),o(5,"Agregar Usuario"),n(),d(6,"button",5),n(),i(7,"form",6),m("ngSubmit",function(){return e.sendUser()}),i(8,"div",7)(9,"label",8),o(10,"Nombre de usuario"),n(),d(11,"input",9),n(),i(12,"div",7)(13,"label",10),o(14,"Tipo de usuario:"),n(),i(15,"div",11),d(16,"input",12),i(17,"label",13),o(18,"Administrador"),n(),d(19,"input",14),i(20,"label",15),o(21,"Usuario"),n(),d(22,"input",16),i(23,"label",17),o(24,"Visitante"),n()()(),i(25,"div",7)(26,"label",18),o(27,"Nueva contrase\xF1a"),n(),d(28,"input",19),n(),i(29,"div",7)(30,"label",20),o(31,"Confirmar contrase\xF1a"),n(),d(32,"input",21),n()(),i(33,"div",22)(34,"button",23),m("click",function(){return e.sendUser()}),d(35,"img",24),n()()()()()),a&2&&(s(7),l("formGroup",e.formUser))},dependencies:[W,P,T,J,A,U,N,O],styles:[".img[_ngcontent-%COMP%]:hover, .selected[_ngcontent-%COMP%]{background-color:var(--background-color-3)}.img[_ngcontent-%COMP%]{width:4rem;cursor:pointer;border:none}.icon[_ngcontent-%COMP%]{width:2.5rem}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3);border:dotted}"]})}return r})();var qe=(()=>{class r{users;userSelected;_authService=f(B);_waitingModalService=f(M);ngOnInit(){return b(this,null,function*(){this._waitingModalService.setIsWaiting(!0),this.users=yield this._authService.getUsers(),this._waitingModalService.setIsWaiting(!1)})}setUserSelected(t){this.userSelected=t}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=c({type:r,selectors:[["app-user-page"]],standalone:!0,features:[p],decls:14,vars:4,consts:[[1,"container"],[1,"col-12"],[1,"custom-header","p-5","rounded","text-center","mt-3"],[1,"title","fw-bold"],[1,"row"],["data-bs-toggle","modal","data-bs-target","#modalAddArea",1,"btn","mt-4","mb-2"],["src","assets/icons/add.svg","alt","Agregar \xC1rea","title","Agregar Usuario",1,"icon"],[3,"userSelectedEvent","users"],[3,"users","user"],[3,"users"]],template:function(a,e){a&1&&(i(0,"main",0)(1,"div",1)(2,"div",2)(3,"p",3),o(4,"Usuarios"),n()()(),i(5,"div",1)(6,"div",4)(7,"div",1)(8,"button",5),d(9,"img",6),n()(),i(10,"div",1)(11,"app-user-cards",7),m("userSelectedEvent",function(q){return e.setUserSelected(q)}),n()()()()(),d(12,"app-user-edit",8)(13,"app-user-add",9)),a&2&&(s(11),l("users",e.users),s(),l("users",e.users)("user",e.userSelected),s(),l("users",e.users))},dependencies:[be,Se,he],styles:[".title[_ngcontent-%COMP%]{font-size:2rem}.custom-header[_ngcontent-%COMP%]{background-color:#fff6}.img[_ngcontent-%COMP%]:hover{background:#00000080}.img[_ngcontent-%COMP%]{cursor:pointer}.icon[_ngcontent-%COMP%]{width:2.5rem}.btn[_ngcontent-%COMP%]:hover{background-color:var(--background-color-3)}"]})}return r})();function Ve(r,g){if(r&1&&(i(0,"p"),o(1),n()),r&2){let t=g.$implicit;s(),re(" ",t.item==null?null:t.item.name," (User: ",t.author,") (ID: ",t._id,") ")}}function Le(r,g){if(r&1&&(i(0,"tr")(1,"th",17),o(2),n(),i(3,"td"),v(4,Ve,2,3,"p",16),n()()),r&2){let t=g.$implicit;s(2),C(t.time),s(2),l("ngForOf",t.requests)}}function je(r,g){if(r&1&&(i(0,"table",12)(1,"thead",13)(2,"tr")(3,"th",14),o(4,"Hora"),n(),i(5,"th",14),o(6,"Informaci\xF3n"),n()()(),i(7,"tbody",15),v(8,Le,5,2,"tr",16),n()()),r&2){let t=h();s(8),l("ngForOf",t.schedule)}}function Ge(r,g){r&1&&(i(0,"div",18),o(1," No se encontrar\xF3n solicitudes para esta fecha. "),n())}var Ce=(()=>{class r{requests;schedule=[];formDate=new I({});_waitingModalService=f(M);_requestService=f(F);ngOnInit(){let a=new Date().toISOString().substring(0,10);this.formDate=new I({date:new w(a,[_.required])})}submit(){return b(this,null,function*(){if(this.formDate.valid){let{date:t}=this.formDate.value;this._waitingModalService.setIsWaiting(!0),this.requests=yield this._requestService.getRequestsToday(t),this.generateSchedule(this.requests,t),this._waitingModalService.setIsWaiting(!1)}})}generateSchedule(t,a){let e=[],[u,q,K]=a.split("-").map(Number),Y=new Date(u,q-1,K);for(let G=0;G<24;G++){let Z=new Date(Y);Z.setHours(G,0,0,0);let ee=new Date(Y);ee.setHours(G+1,0,0,0);let te=t.filter(H=>H.startDate&&H.endDate?new Date(H.startDate).getTime()<ee.getTime()&&new Date(H.endDate).getTime()>Z.getTime():!1);te.length>0&&e.push({time:`${G}:00 - ${G+1}:00`,requests:te})}this.schedule=e}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=c({type:r,selectors:[["app-itinerary-page"]],standalone:!0,features:[p],decls:13,vars:3,consts:[[1,"container","mt-4","p-4","custom-background","rounded"],[1,"row"],[1,"col-12","mb-4"],[1,"h1","text-center"],[1,""],[1,"row","justify-content-center",3,"submit","formGroup"],[1,"col-12","col-md-6","col-lg-3"],["formControlName","date","type","date","name","date","id","date",1,"form-control","text-center"],[1,"col-12","d-flex","justify-content-end","mt-4"],["type","submit","name","submit","id","submit","value","Obtener",1,"btn","btn-lg","btn-outline-dark"],["class","table table-bordered mt-4 table-striped",4,"ngIf"],["class","alert alert-info mt-4",4,"ngIf"],[1,"table","table-bordered","mt-4","table-striped"],[1,"table-dark","text-center"],["scope","col"],[1,"text-center"],[4,"ngFor","ngForOf"],["scope","row"],[1,"alert","alert-info","mt-4"]],template:function(a,e){a&1&&(i(0,"main",0)(1,"div",1)(2,"div",2)(3,"p",3),o(4,"Itinerario del d\xEDa"),n()(),i(5,"div",4)(6,"form",5),m("submit",function(){return e.submit()}),i(7,"div",6),d(8,"input",7),n(),i(9,"div",8),d(10,"input",9),n()()()(),v(11,je,9,1,"table",10)(12,Ge,2,0,"div",11),n()),a&2&&(s(6),l("formGroup",e.formDate),s(5),l("ngIf",e.schedule.length>0),s(),l("ngIf",e.schedule.length===0))},dependencies:[W,P,T,A,U,N,O,k,R]})}return r})();var Xn=[{path:"inventory",loadChildren:()=>import("./chunk-ROSOOM4F.js").then(r=>r.routes)},{path:"request",component:ve},{path:"itinerary",component:Ce},{path:"user",component:qe},{path:"**",redirectTo:"inventory"}];export{Xn as routes};
